<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Home</title>
  <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

  <!-- evil icon -->

  <link rel="stylesheet" href="/assets/evil-icons.min.css">
  <script src="/assets/evil-icons.min.js"></script>

  <!-- todo: include this into main.css -->

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://wildflame.me/">
  <link rel="alternate" type="application/rss+xml" title="Ben's Doins" href="http://wildflame.me/feed.xml">
</head>

  <body>
    <div class="page-content">
      <div class="container">
        <div class="three columns">
          <header class="site-header">

  <h2 class="logo"><a href="/">Ben's Doins</a></h2>

  <div class="nav">
    
    <label for="menu-toggle" class="menu-icon">
        <!--div data-icon="ei-navicon"></div-->
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
    </label>
    <input type="checkbox" id="menu-toggle">

    <div class="site-nav">
      <nav>
        <ul class="page-link">
          <li><a href="/">Home</a></li>
          <li><a href="/archive">Posts</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="/feed.xml">RSS</a></li>
        </ul>
      </nav>
    </div>

  </div>
</header>

        </div>

        <div class="nine columns" style="z-index:100;">
          <div class="wrapper">
            <div class="home">
  <div class="post-list">

    

    <article class="post_card post">
      <header class="post_header">
        <h2 class="post_title"><a href="/programming/2016/09/23/haskell-ball-bounce.html">Haskell Ball Bounce</a></h2>
        <time class="post_date">23 September 2016, Friday</time>
      </header>
      <div class="post_excerpt">
        <p>
          
          <p>I've been learning a bit about Haskell. Here's something silly I wrote. It animates a ball bouncing in a box in a terminal window. </p>
<p>
  <figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="kr">import</span> <span class="nn">Control.Concurrent</span>
<span class="kr">import</span> <span class="nn">System.Console.ANSI</span>
<span class="n">main</span> <span class="o">=</span> <span class="n">animate</span> <span class="o">$</span> <span class="n">map</span> <span class="p">(</span><span class="n">printArena</span><span class="p">)</span> <span class="p">(</span><span class="n">iterate</span> <span class="n">stepArena</span> <span class="n">arena</span><span class="p">)</span>
  <span class="kr">where</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="kt">Ball</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">3</span> <span class="mi">2</span>
    <span class="n">arena</span> <span class="o">=</span> <span class="kt">Arena</span> <span class="mi">99</span> <span class="mi">51</span> <span class="n">ball</span>
<span class="n">repeatn</span> <span class="o">::</span> <span class="kt">Char</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="o">-&gt;</span> <span class="kt">String</span>
<span class="n">repeatn</span> <span class="n">a</span> <span class="n">n</span> <span class="o">=</span> <span class="n">take</span> <span class="n">n</span> <span class="p">(</span><span class="n">repeat</span> <span class="n">a</span><span class="p">)</span>
<span class="kr">data</span> <span class="kt">Ball</span> <span class="o">=</span> <span class="kt">Ball</span> <span class="kt">Int</span> <span class="kt">Int</span> <span class="kt">Int</span> <span class="kt">Int</span>
<span class="kr">data</span> <span class="kt">Arena</span> <span class="o">=</span> <span class="kt">Arena</span> <span class="kt">Int</span> <span class="kt">Int</span> <span class="kt">Ball</span>
<span class="n">printArena</span> <span class="o">::</span> <span class="kt">Arena</span> <span class="o">-&gt;</span> <span class="kt">String</span>
<span class="n">printArena</span> <span class="p">(</span><span class="kt">Arena</span> <span class="n">w</span> <span class="n">h</span> <span class="p">(</span><span class="kt">Ball</span> <span class="n">x</span> <span class="n">y</span> <span class="n">dx</span> <span class="n">dy</span><span class="p">))</span> <span class="o">=</span>
  <span class="n">repeatn</span> <span class="sc">'-'</span> <span class="p">(</span><span class="n">w</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="o">++</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span> <span class="o">++</span> <span class="p">(</span><span class="n">printArenaRow</span> <span class="n">w</span> <span class="n">h</span> <span class="p">(</span><span class="kt">Ball</span> <span class="n">x</span> <span class="n">y</span> <span class="n">dx</span> <span class="n">dy</span><span class="p">))</span>
<span class="n">printArenaRow</span> <span class="o">::</span> <span class="kt">Int</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="o">-&gt;</span> <span class="kt">Ball</span><span class="o">-&gt;</span> <span class="kt">String</span>
<span class="n">printArenaRow</span> <span class="n">w</span> <span class="mi">0</span>  <span class="kr">_</span><span class="o">=</span>
  <span class="n">repeatn</span> <span class="sc">'-'</span> <span class="p">(</span><span class="n">w</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="o">++</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
<span class="n">printArenaRow</span> <span class="n">w</span> <span class="n">h</span> <span class="p">(</span><span class="kt">Ball</span> <span class="n">x</span> <span class="n">y</span> <span class="n">dx</span> <span class="n">dy</span><span class="p">)</span><span class="o">=</span>
  <span class="s">"|"</span> <span class="o">++</span> <span class="p">(</span><span class="n">repeatn</span> <span class="sc">' '</span> <span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">++</span> <span class="n">b</span> <span class="o">++</span> <span class="p">(</span><span class="n">repeatn</span> <span class="sc">' '</span> <span class="p">(</span><span class="n">w</span><span class="o">-</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">++</span> <span class="s">"|</span><span class="se">\n</span><span class="s">"</span> <span class="o">++</span> <span class="p">(</span><span class="n">printArenaRow</span> <span class="n">w</span> <span class="p">(</span><span class="n">h</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="kt">Ball</span> <span class="n">x</span> <span class="n">y</span> <span class="n">dx</span> <span class="n">dy</span><span class="p">))</span>
    <span class="kr">where</span>
      <span class="n">b</span> <span class="o">=</span> <span class="kr">if</span> <span class="p">((</span><span class="n">h</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span> <span class="kr">then</span> <span class="s">"o"</span> <span class="kr">else</span> <span class="s">" "</span>
<span class="n">stepArena</span> <span class="o">::</span> <span class="kt">Arena</span> <span class="o">-&gt;</span> <span class="kt">Arena</span>
<span class="n">stepArena</span> <span class="p">(</span><span class="kt">Arena</span> <span class="n">w</span> <span class="n">h</span> <span class="p">(</span><span class="kt">Ball</span> <span class="n">x</span> <span class="n">y</span> <span class="n">dx</span> <span class="n">dy</span><span class="p">))</span> <span class="o">=</span>
  <span class="p">(</span><span class="kt">Arena</span> <span class="n">w</span> <span class="n">h</span> <span class="p">(</span><span class="kt">Ball</span> <span class="n">x'</span> <span class="n">y'</span> <span class="n">dx'</span> <span class="n">dy'</span><span class="p">))</span>
    <span class="kr">where</span>
      <span class="n">x'</span> <span class="o">=</span> <span class="n">max</span> <span class="p">(</span><span class="n">min</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">dx</span><span class="p">)</span> <span class="p">(</span><span class="n">w</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="mi">0</span>
      <span class="n">y'</span> <span class="o">=</span> <span class="n">max</span> <span class="p">(</span><span class="n">min</span> <span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span> <span class="p">(</span><span class="n">h</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="mi">0</span>
      <span class="n">dx'</span> <span class="o">=</span> <span class="kr">if</span> <span class="p">((</span><span class="n">x'</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">x'</span> <span class="o">==</span> <span class="p">(</span><span class="n">w</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span> <span class="kr">then</span> <span class="o">-</span><span class="n">dx</span> <span class="kr">else</span> <span class="n">dx</span>
      <span class="n">dy'</span> <span class="o">=</span> <span class="kr">if</span> <span class="p">((</span><span class="n">y'</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">y'</span> <span class="o">==</span> <span class="p">(</span><span class="n">h</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span> <span class="kr">then</span> <span class="o">-</span><span class="n">dy</span> <span class="kr">else</span> <span class="n">dy</span>
<span class="n">multiply</span> <span class="o">::</span> <span class="p">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="p">)</span>
<span class="n">multiply</span> <span class="n">f</span> <span class="mi">0</span> <span class="o">=</span> <span class="n">f</span>
<span class="n">multiply</span> <span class="n">f</span> <span class="n">n</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="p">(</span><span class="n">multiply</span> <span class="n">f</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="n">animate</span> <span class="o">::</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="n">animate</span> <span class="kt">[]</span> <span class="o">=</span>
  <span class="n">putStr</span> <span class="s">"done"</span>
<span class="n">animate</span> <span class="p">(</span><span class="n">a</span><span class="o">:</span><span class="n">as</span><span class="p">)</span> <span class="o">=</span>
  <span class="kr">do</span>
    <span class="n">putStr</span> <span class="n">a</span>
    <span class="n">threadDelay</span> <span class="mi">100000</span>
    <span class="n">clearScreen</span>
    <span class="n">animate</span> <span class="n">as</span></code></pre></figure>

           
          <a class="read-more" href="/programming/2016/09/23/haskell-ball-bounce.html"> »  </a>
        </p> 
      </div>
      <footer class="post_meta">


        
        <!--
        
        <a href="/category/Programming">
          <data data-icon="ei-archive"></data>
          Programming</a>
        
        -->

        <!--
        
        -->

        <!--p class="readmore">
          <a href=""><data data-icon="ei-arrow-right"></data>Read this article  </a>
        </p-->
      </footer>
      <hr/>
    </article>
    

    <article class="post_card post">
      <header class="post_header">
        <h2 class="post_title"><a href="/troubleshooting/2016/02/11/wi-fi-troubles.html">Wi-Fi Troubles</a></h2>
        <time class="post_date">11 February 2016, Thursday</time>
      </header>
      <div class="post_excerpt">
        <p>
          
          <p>I just finished building a new computer with parts given to me by my friends Jon and Max. The thing works great, but I've got Wi-Fi issues. </p>
<p>I bought <a href="http://www.amazon.com/TP-LINK-TL-WN881ND-Wireless-Express-Low-profile/dp/B0079XWMEI/ref=sr_1_4?ie=UTF8&qid=1455199900&sr=8-4&keywords=wifi+card" target="_blank">this</a> wifi card. It worked fine, but for some reason the signal strength behind my computer was terrible (two bars or so). This was bad.</p>
<p>Using my cell phone, I noticed that the signal strength was much higher a few feet above the back of the tower, so I bought <a href="http://www.amazon.com/TP-LINK-TL-WN822N-Wireless-External-10-7-10-10/dp/B00416Q5KI/ref=sr_1_21?s=pc&ie=UTF8&qid=1455200080&sr=1-21&keywords=wifi+adapter" target="_blank">this</a> USB wifi adapter, which I could place several feet away.</p>
<p>This initially worked perfectly. The computer is a dual boot&mdash;Windows 8 and Ubuntu 14.04&mdash;and it worked in both. Then, a few days later, it stopped working in Ubuntu.  It would disconnect and reconnect every few minutes. This change coincided with my accidentally plugging a cable into my shitty USB hub backward, shorting out all the peripherals and causing the wifi adapter to shut off and reconnect. I can't be sure they're related, but I can't think of anything else that changed.</p>
<p>I found <a href="http://askubuntu.com/questions/625987/does-tp-link-wn822n-work-on-ubuntu" target="_blank">this</a> thread on the subject. Apparently, I have the TL-W822N V3. Versions 2 and 1 worked fine with Ubuntu, but Version 3 doesn't. This doesn't completely fit, since it was working at one point, but I couldn't find anything else to try.</p>
<p>I ran the code at the top of Pilot6's answer, and rebooted.</p>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install git
git clone https://github.com/lwfinger/rtlwifi_new.git
<span class="nb">cd </span>rtlwifi_new
make
sudo make install</code></pre></figure>
<p>Aaand found just a blank white screen that didn't respond to any input. I should mention that also coincided with installing Dropbox, so that may have caused the problem. Not sure. Anyway, I tried a few things, but this was a new install anyway, so I figured I'd just reinstall Ubuntu.</p>
<p>My new install had the same problem. I tried the second suggestion in Pilot6's answer.</p>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo add-apt-repository ppa:hanipouspilot/rtlwifi
sudo apt-get update
sudo apt-get install rtl8192cu-dkms</code></pre></figure>
<p>Didn't help.</p>
<p>I tried the <a href="https://github.com/pvaret/rtl8192cu-fixes/blob/master/README.md" target="_blank">solution</a> suggested in Rajat Pandita's answer. Also didn't help.</p>
<p>Finally I tried the solution in Pilot6's second answer.</p>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash">sudo add-apt-repository ppa:hanipouspilot/rtlwifi
sudo apt-get update
sudo apt-get install rtlwifi-new-dkms linux-firmware</code></pre></figure>
<p>And it worked! So, there you have it. If you're having this issue, maybe this'll be useful.</p>

           
          <a class="read-more" href="/troubleshooting/2016/02/11/wi-fi-troubles.html"> »  </a>
        </p> 
      </div>
      <footer class="post_meta">


        
        <!--
        
        <a href="/category/Troubleshooting">
          <data data-icon="ei-archive"></data>
          Troubleshooting</a>
        
        -->

        <!--
        
        -->

        <!--p class="readmore">
          <a href=""><data data-icon="ei-arrow-right"></data>Read this article  </a>
        </p-->
      </footer>
      <hr/>
    </article>
    

    <article class="post_card post">
      <header class="post_header">
        <h2 class="post_title"><a href="/physics/2016/01/28/landau-squire-flow.html">Landau-Squire Flow</a></h2>
        <time class="post_date">28 January 2016, Thursday</time>
      </header>
      <div class="post_excerpt">
        <p>
          
          <p>I made a simulation of a Landau-Squire jet with javascript. Check it out! You can click on this gif to take you to the simulation page. It looks way better there.</p>
<p><a href="http://www.benwiener.com/physics/landau-squire.html" rel="attachment wp-att-65"><img src="http://www.benwiener.com/wp-content/uploads/2016/01/landau-squire.gif" alt="landau-squire" width="1042" class="alignnone size-full wp-image-65" /></a></p>
<p>This is the Navier-Stokes solution to a tiny submerged point jet. Imagine a thin needle injecting fluid into the middle of bath full of little tracer particles. Code below.</p>
<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"myCanvas"</span><span class="p">);</span>
  <span class="nx">c</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="err">‘</span><span class="nx">click</span><span class="err">’</span><span class="p">,</span> <span class="nx">onClick</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">"2d"</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">ball_list</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="kd">var</span> <span class="nx">is_paused</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="nb">window</span><span class="p">.</span><span class="nx">onblur</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">is_paused</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">pause</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="kd">function</span> <span class="nx">onClick</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">is_paused</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">unpause</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">pause</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">pause</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">is_paused</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">globalAlpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">;</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">360</span><span class="p">,</span><span class="mi">140</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">300</span><span class="p">)</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">540</span><span class="p">,</span><span class="mi">140</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">300</span><span class="p">)</span>

    <span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s2">"30px Arial"</span><span class="p">;</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="s2">"Click to unpause"</span><span class="p">,</span><span class="mi">390</span><span class="p">,</span><span class="mi">500</span><span class="p">);</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">globalAlpha</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">unpause</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">is_paused</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">Ball</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">x</span><span class="p">:</span> <span class="nx">x</span><span class="p">,</span>
      <span class="na">y</span><span class="p">:</span> <span class="nx">y</span><span class="p">,</span>
      <span class="na">draw</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
      <span class="p">},</span>
      <span class="na">update</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">xp</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="err">–</span> <span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span> <span class="p">)</span><span class="o">/</span><span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">yp</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="err">–</span> <span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">xp</span> <span class="o">*</span> <span class="nx">xp</span> <span class="err">–</span> <span class="nx">yp</span> <span class="o">*</span> <span class="nx">yp</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">xp</span> <span class="o">*</span> <span class="nx">xp</span> <span class="o">+</span> <span class="nx">yp</span> <span class="o">*</span> <span class="nx">yp</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">))</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">1.5</span> <span class="o">*</span> <span class="nx">xp</span> <span class="o">*</span> <span class="nx">yp</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">xp</span> <span class="o">*</span> <span class="nx">xp</span> <span class="o">+</span> <span class="nx">yp</span> <span class="o">*</span> <span class="nx">yp</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">))</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">clearCanvas</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="nx">ball_list</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ball</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">ball</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">ball_list</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">ball</span><span class="p">.</span><span class="nx">draw</span><span class="p">();</span>
    <span class="p">})</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ball_list</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ball</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ball</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
    <span class="p">})</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">clearCanvas</span><span class="p">();</span>
    <span class="nx">ball_list</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">ball</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ball</span><span class="p">.</span><span class="nx">draw</span><span class="p">();</span>
    <span class="p">})</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">is_paused</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">update</span><span class="p">();</span>
      <span class="nx">draw</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">addTracers</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">is_paused</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">n_tracer</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">step</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="nx">n_tracer</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">rand</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">step</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="nx">x</span> <span class="o">+=</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">step</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">c</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span> <span class="nx">y</span><span class="o">+=</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">ball_list</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">Ball</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">rand</span> <span class="o">*</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="err">–</span> <span class="mf">0.5</span><span class="p">),</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">rand</span> <span class="o">*</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="err">–</span> <span class="mf">0.5</span><span class="p">)));</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ball_list</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">setInterval</span><span class="p">(</span><span class="nx">loop</span><span class="p">,</span> <span class="mi">1000</span><span class="o">/</span><span class="mi">60</span><span class="p">);</span>
  <span class="nx">setInterval</span><span class="p">(</span><span class="nx">addTracers</span><span class="p">,</span> <span class="mi">1000</span><span class="o">/</span><span class="mi">1</span><span class="p">);</span></code></pre></figure>

           
          <a class="read-more" href="/physics/2016/01/28/landau-squire-flow.html"> »  </a>
        </p> 
      </div>
      <footer class="post_meta">


        
        <!--
        
        <a href="/category/Physics">
          <data data-icon="ei-archive"></data>
          Physics</a>
        
        -->

        <!--
        
        -->

        <!--p class="readmore">
          <a href=""><data data-icon="ei-arrow-right"></data>Read this article  </a>
        </p-->
      </footer>
      <hr/>
    </article>
    

    <article class="post_card post">
      <header class="post_header">
        <h2 class="post_title"><a href="/radio/2016/01/06/building-rf-circuits.html">Building RF Circuits</a></h2>
        <time class="post_date">06 January 2016, Wednesday</time>
      </header>
      <div class="post_excerpt">
        <p>
          
          <p>Since my last post about RF, Phil and I have taken some steps forward. I've built two simple RF circuits: a <a href="https://www.youtube.com/watch?v=A5gGeV7CiQ0" target="_blank">20dB attenuator</a> and a <a href="http://www.qsl.net/kl7jef/Build%20a%20Return%20Loss%20Bridge.pdf" target="_blank">return loss bridge</a>. Do they work? I'm not sure, exactly. The attentuator's purpose is to decrease the amplitude of a signal. It definitely does that, at least to some extent. Whether it does so by 20dB is in question. </p>
<p><center><br />
<a href="http://www.benwiener.com/wp-content/uploads/2016/01/IMG_20160106_240936311-1.jpg" rel="attachment wp-att-58"><img src="http://www.benwiener.com/wp-content/uploads/2016/01/IMG_20160106_240936311-1-300x140.jpg" alt="Attenuator" width="300" height="140" class="size-medium wp-image-58" /></a><br />
Attenuator<br />
</center></p>
<p>The return loss bridge is a bit mysterious. It has three coaxial inputs. One for an RF signal, one for a test load, and a third for a detector. The output measured by the detector should be related to the part of the signal that's reflected by the load. It seems like it might be working too.  </p>
<p><center><br />
<a href="http://www.benwiener.com/wp-content/uploads/2016/01/IMG_20160106_240943681-1.jpg" rel="attachment wp-att-57"><img src="http://www.benwiener.com/wp-content/uploads/2016/01/IMG_20160106_240943681-1-300x233.jpg" alt="Return Loss Bridge" width="300" height="233" class="size-medium wp-image-57" /></a><br />
Return Loss Bridge<br />
</center></p>
<p>The purpose of this post is to record the RF circuit building techniques we've been using. </p>
<p>You want to build on copper clad board, with the copper surface itself acting as a ground plane. You can solder SMA connectors directly to the ground plane. To reduce non-ideal behavior at high frequency, you want to use components with short leads, ideally surface mount parts. Having short leads means keeping the whole thing compact. You can fiddle around with layouts until you find one that keeps leads short.<br />
Ideally, there's no wire and the components themselves bridge all the gaps, as with the attenuator. Once you've chosen a layout, you can estimate the area of it and use tin snips to cut that size piece out of a copper clad board. Then just solder it together and try not to mangle it too much.</p>

           
          <a class="read-more" href="/radio/2016/01/06/building-rf-circuits.html"> »  </a>
        </p> 
      </div>
      <footer class="post_meta">


        
        <!--
        
        <a href="/category/Radio">
          <data data-icon="ei-archive"></data>
          Radio</a>
        
        -->

        <!--
        
        -->

        <!--p class="readmore">
          <a href=""><data data-icon="ei-arrow-right"></data>Read this article  </a>
        </p-->
      </footer>
      <hr/>
    </article>
    

    <article class="post_card post">
      <header class="post_header">
        <h2 class="post_title"><a href="/electronics/projects/programming/2016/01/05/laser-table.html">Laser Table</a></h2>
        <time class="post_date">05 January 2016, Tuesday</time>
      </header>
      <div class="post_excerpt">
        <p>
          
          <p>Phil, Will, and I built an aimable laser made with a mirror and two servos driven by an Arduino. The laser draws persistent patterns on the surface of a small table treated with glow-in-the-dark spray paint. It can be controlled using a cool multi-user Node.js/Socket.io web interface. Give 'er a look.</p>
<p><center><br />
<iframe width="560" height="315" src="https://www.youtube.com/embed/ltbLshOODaE" frameborder="0" allowfullscreen></iframe><br />
</center></p>
<p><strong>Laser System</strong></p>
<p>The laser is controlled by an Arduino nano that drives two HS-311 servos. Coordinates are sent to the Ardiuno from a computer over serial. One servo controls the azimuthal angle of the mirror and the other controls the polar angle. The purpose of the laser system is to aim the laser at the glow-in-the-dark table surface. The laser system sits under the surface and draws on it from below. The laser itself is a violet laser from eBay. Be careful with this laser. It would just love to destroy your eyes. The whole thing is hot-glued to a 2x4. This was originally a temporary solution that we thought was really funny, but it ended up staying that way. You know how that goes...</p>
<p><strong>Laser Controller</strong></p>
<p>Commands are sent to the laser system by a laptop which polls a web server. We used Node.js to run some local Javascript code that handles the polling and the serial output. We chose Javascript because it seemed to handle the asynchronous HTTP better than Python and those are the only two languages that exist. We know this could have been a Raspberry Pi, but it isn't. Sorry.</p>
<p><strong>Web Server</strong></p>
<p>The web server is a Node.js server that uses Socket.io for real-time client interaction. The server responds to laser controller GET requests with the most up-to-date position for the laser. It also serves a page that allow clients to control the laser on their phones. The server randomly chooses a connected user every five seconds and allows them to control the laser using their touch screen. Other users who are waiting for their turns see the path plotted on their screens in real time.</p>
<p><strong>Table</strong></p>
<p>The table is simply constructed from a few 2x2s and scrap wood. It is really a piece of junk, just there to hold up the drawing surface. The surface of the table is a piece of plexiglass treated with glow-in-the-dark spray paint. We started by thoroughly sanding both sides of the plexiglass to diffuse the eye-boiling laser. We used 100 grit sandpaper and a random orbit sander. Try not to break the plexiglass like Phil did or touch the wet paint like I did. Those are both bad things to do.</p>
<p>Below is the code on the Arduino and the Github repositories that contain the server and laser controller code.<br />
<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include &lt;Servo.h&gt;
</span><span class="c1">//#include &lt;SoftwareSerial.h&gt;
</span><span class="cp">#define ARATIO 425/(PI/4)
#define AZERO 1606
</span><span class="c1">//#define AZERO 2020
</span><span class="cp">#define BZERO 1545
#define D 200.
</span>
<span class="n">Servo</span> <span class="n">servoA</span><span class="p">,</span> <span class="n">servoB</span><span class="p">;</span> <span class="c1">// create servo object to control a servo
</span><span class="n">String</span> <span class="n">v</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">sign</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.;</span>
<span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.;</span>
<span class="kt">float</span> <span class="n">x_temp</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">y_temp</span><span class="p">;</span>

<span class="c1">//SoftwareSerial ser(2,3);
</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">servoA</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span><span class="mi">9</span><span class="p">);</span>
  <span class="n">servoB</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// attaches the servo on pin 9 to the servo object
</span>  <span class="n">move</span><span class="p">(</span><span class="err">‘</span><span class="n">a</span><span class="err">’</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">move</span><span class="p">(</span><span class="err">‘</span><span class="n">b</span><span class="err">’</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">19200</span><span class="p">);</span>
  <span class="c1">//ser.begin(9600);
</span><span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// put your main code here, to run repeatedly:
</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">())</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">();</span>
    <span class="c1">//Serial.write(ch);
</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="err">‘;’</span><span class="p">:</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">getX</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">getY</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
      <span class="n">moveXY</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>
      <span class="n">resetV</span><span class="p">();</span>
      <span class="k">break</span><span class="p">;</span>
      <span class="nl">default:</span>
      <span class="n">v</span> <span class="o">+=</span> <span class="n">ch</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">resetV</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">v</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">float</span> <span class="nf">getX</span><span class="p">(</span><span class="n">String</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">comma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">input</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">substring</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s">","</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">comma</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">input</span><span class="p">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">comma</span><span class="p">).</span><span class="n">toFloat</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">getY</span><span class="p">(</span><span class="n">String</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">floatint</span> <span class="n">comma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">input</span><span class="p">.</span><span class="n">length</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">substring</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s">","</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">comma</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">input</span><span class="p">.</span><span class="n">substring</span><span class="p">(</span><span class="n">comma</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">input</span><span class="p">.</span><span class="n">length</span><span class="p">()).</span><span class="n">toFloat</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">move</span><span class="p">(</span><span class="kt">char</span> <span class="n">ch</span><span class="p">,</span> <span class="kt">float</span> <span class="n">angle</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="err">‘</span><span class="n">a</span><span class="err">’</span><span class="p">:</span>
    <span class="n">servoA</span><span class="p">.</span><span class="n">writeMicroseconds</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">angle</span><span class="o">*</span><span class="n">ARATIO</span><span class="p">)</span> <span class="o">+</span> <span class="n">AZERO</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="err">‘</span><span class="n">b</span><span class="err">’</span><span class="p">:</span>
    <span class="n">servoB</span><span class="p">.</span><span class="n">writeMicroseconds</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">angle</span><span class="o">*</span><span class="n">ARATIO</span><span class="p">)</span> <span class="o">+</span> <span class="n">BZERO</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">moveLineXY</span><span class="p">(</span><span class="kt">float</span> <span class="n">end_x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">end_y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n_steps</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">float</span> <span class="n">start_x</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">start_y</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>

  <span class="kt">float</span> <span class="n">delta_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">end_x</span> <span class="err">–</span> <span class="n">start_x</span><span class="p">)</span><span class="o">/</span><span class="n">n_steps</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">delta_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">end_y</span> <span class="err">–</span> <span class="n">start_y</span><span class="p">)</span><span class="o">/</span><span class="n">n_steps</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n_steps</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">moveXY</span><span class="p">(</span><span class="n">start_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">delta_x</span> <span class="o">*</span> <span class="n">i</span><span class="p">),</span> <span class="n">start_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">delta_y</span> <span class="o">*</span> <span class="n">i</span><span class="p">));</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">moveXY</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>
  <span class="kt">float</span> <span class="n">r</span> <span class="o">=</span> <span class="n">getNorm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">D</span><span class="p">);</span>
  <span class="kt">float</span> <span class="n">vx</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="n">r</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">vy</span> <span class="o">=</span> <span class="n">y</span><span class="o">/</span><span class="n">r</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">vz</span> <span class="o">=</span> <span class="n">D</span><span class="o">/</span><span class="n">r</span><span class="p">;</span>

  <span class="kt">float</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">vx</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">ny</span> <span class="o">=</span> <span class="n">vy</span> <span class="err">–</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">nz</span> <span class="o">=</span> <span class="n">vz</span><span class="p">;</span>

  <span class="kt">float</span> <span class="n">nnorm</span> <span class="o">=</span> <span class="n">getNorm</span><span class="p">(</span><span class="n">nx</span><span class="p">,</span><span class="n">ny</span><span class="p">,</span><span class="n">nz</span><span class="p">);</span>
  <span class="n">nx</span> <span class="o">=</span> <span class="n">nx</span><span class="o">/</span><span class="n">nnorm</span><span class="p">;</span>
  <span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span><span class="o">/</span><span class="n">nnorm</span><span class="p">;</span>
  <span class="n">nz</span> <span class="o">=</span> <span class="n">nz</span><span class="o">/</span><span class="n">nnorm</span><span class="p">;</span>

  <span class="kt">float</span> <span class="n">alpha</span> <span class="o">=</span> <span class="n">asin</span><span class="p">(</span><span class="n">nz</span><span class="p">);</span>
  <span class="c1">//float phi = atan2(y,x);
</span>  <span class="kt">float</span> <span class="n">beta</span> <span class="o">=</span> <span class="n">atan2</span><span class="p">(</span><span class="n">nx</span><span class="p">,</span><span class="o">-</span><span class="n">ny</span><span class="p">);</span>

  <span class="cm">/*
  if (phi &gt; PI/2) {
  phi = phi – PI;
  theta = theta * -1;
} else if (phi &lt; -PI/2) {
phi = phi + PI;
theta = theta * -1;
}
*/</span>

<span class="c1">//Serial.println(alpha);
//Serial.println(beta);
</span>
<span class="n">move</span><span class="p">(</span><span class="err">‘</span><span class="n">a</span><span class="err">’</span><span class="p">,</span><span class="n">alpha</span><span class="p">);</span>
<span class="n">move</span><span class="p">(</span><span class="err">‘</span><span class="n">b</span><span class="err">’</span><span class="p">,</span><span class="o">-</span><span class="n">beta</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">float</span> <span class="nf">getNorm</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">,</span> <span class="kt">float</span> <span class="n">z</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">sq</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">sq</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="n">sq</span><span class="p">(</span><span class="n">z</span><span class="p">));</span>
<span class="p">}</span></code></pre></figure></p>
<p><a href="https://github.com/ishmandoo/laser">https://github.com/ishmandoo/laser</a><br />
<a href="https://github.com/philzook58/node_laser_control">https://github.com/philzook58/node_laser_control</a></p>

           
          <a class="read-more" href="/electronics/projects/programming/2016/01/05/laser-table.html"> »  </a>
        </p> 
      </div>
      <footer class="post_meta">


        
        <!--
        
        <a href="/category/Electronics">
          <data data-icon="ei-archive"></data>
          Electronics</a>
        
        <a href="/category/Projects">
          <data data-icon="ei-archive"></data>
          Projects</a>
        
        <a href="/category/Programming">
          <data data-icon="ei-archive"></data>
          Programming</a>
        
        -->

        <!--
        
        -->

        <!--p class="readmore">
          <a href=""><data data-icon="ei-arrow-right"></data>Read this article  </a>
        </p-->
      </footer>
      <hr/>
    </article>
    

    <div class="pagination older-post"><a href="./archive"><data data-icon="ei-arrow-right"></data> Archive  </a></div>
  </div>
</div>

          </div>
        </div>
      </div>
      <footer class="site-footer">
  <div class="container">
    <div class="footer left column one-half">
      <section class="small-font">
        Theme <a href="https://github.com/wild-flame/jekyll-simple"> Simple </a> by <a href="http://wildflame.me">wildflame</a>
        © 2016 
        Powered by <a href="https://github.com/jekyll/jekyll">jekyll</a>
      </section>
    </div>

    <div class="footer right column one-half">
      <section class="small-font">
        
        <a href="https://github.com/ishmandoo"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span></a>

        
        
        <a href="https://twitter.com/ishmandoo"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span></a>

        
      </section>
    </div>
  </div>
</footer>
 
    </div>
  </body>
</html>
